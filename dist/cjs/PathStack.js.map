{"version":3,"sources":["PathStack.js"],"sourcesContent":["const FIFO = require('fifo');\n\nconst depthFirst = require('./depthFirst');\n\nfunction PathStack() {\n  this.stack = new FIFO();\n  this.length = 0;\n}\n\nPathStack.prototype.push = function push(item) {\n  if (!item) throw new Error('item is mandatory');\n  if (item.files && !item.files.length) throw new Error('item files must have a length');\n  this.stack.push(item);\n  this.length += item.files ? item.files.length : 1;\n  return this;\n};\n\nPathStack.prototype.pop = function pop() {\n  if (!this.stack.length) throw new Error('Stack is empty');\n  const item = this.stack.last();\n  this.length--;\n\n  // just a simple item\n  if (!item.files) return depthFirst.bind(null, this.stack.pop());\n\n  // resuse this item\n  if (item.files.length > 1) return depthFirst.bind(null, { path: item.path, basename: item.files.pop(), depth: item.depth });\n\n  // done with this item\n  item.basename = item.files.pop();\n  return depthFirst.bind(null, this.stack.pop());\n};\n\nPathStack.prototype.last = function last() {\n  return this.stack.last();\n};\n\nmodule.exports = PathStack;\n"],"names":["FIFO","require","depthFirst","PathStack","stack","length","prototype","push","item","Error","files","pop","last","bind","path","basename","depth","module","exports"],"mappings":";AAAA,IAAMA,OAAOC,QAAQ;AAErB,IAAMC,aAAaD,QAAQ;AAE3B,SAASE;IACP,IAAI,CAACC,KAAK,GAAG,IAAIJ;IACjB,IAAI,CAACK,MAAM,GAAG;AAChB;AAEAF,UAAUG,SAAS,CAACC,IAAI,GAAG,SAASA,KAAKC,IAAI;IAC3C,IAAI,CAACA,MAAM,MAAM,IAAIC,MAAM;IAC3B,IAAID,KAAKE,KAAK,IAAI,CAACF,KAAKE,KAAK,CAACL,MAAM,EAAE,MAAM,IAAII,MAAM;IACtD,IAAI,CAACL,KAAK,CAACG,IAAI,CAACC;IAChB,IAAI,CAACH,MAAM,IAAIG,KAAKE,KAAK,GAAGF,KAAKE,KAAK,CAACL,MAAM,GAAG;IAChD,OAAO,IAAI;AACb;AAEAF,UAAUG,SAAS,CAACK,GAAG,GAAG,SAASA;IACjC,IAAI,CAAC,IAAI,CAACP,KAAK,CAACC,MAAM,EAAE,MAAM,IAAII,MAAM;IACxC,IAAMD,OAAO,IAAI,CAACJ,KAAK,CAACQ,IAAI;IAC5B,IAAI,CAACP,MAAM;IAEX,qBAAqB;IACrB,IAAI,CAACG,KAAKE,KAAK,EAAE,OAAOR,WAAWW,IAAI,CAAC,MAAM,IAAI,CAACT,KAAK,CAACO,GAAG;IAE5D,mBAAmB;IACnB,IAAIH,KAAKE,KAAK,CAACL,MAAM,GAAG,GAAG,OAAOH,WAAWW,IAAI,CAAC,MAAM;QAAEC,MAAMN,KAAKM,IAAI;QAAEC,UAAUP,KAAKE,KAAK,CAACC,GAAG;QAAIK,OAAOR,KAAKQ,KAAK;IAAC;IAEzH,sBAAsB;IACtBR,KAAKO,QAAQ,GAAGP,KAAKE,KAAK,CAACC,GAAG;IAC9B,OAAOT,WAAWW,IAAI,CAAC,MAAM,IAAI,CAACT,KAAK,CAACO,GAAG;AAC7C;AAEAR,UAAUG,SAAS,CAACM,IAAI,GAAG,SAASA;IAClC,OAAO,IAAI,CAACR,KAAK,CAACQ,IAAI;AACxB;AAEAK,OAAOC,OAAO,GAAGf"}